<div class="whole-page">

  <div>
    <div class="profile main-title">
      <h1>Profile</h1>
    </div>

    <div class="profile grey-div">
      
      <h2>Hi {{user.name}}!</h2>

      {{#if user.profile_picture}}
        <img id="profile-photo" src={{user.profile_picture}}>
      {{else}}
        <img id="profile-photo" src="/images/cutie-pie.jpeg" width="100" height="100"/>
      {{/if}}

      <form id="upload-profile-photo-form" action="/profile" method="post" enctype="multipart/form-data">
        <label class="button" for="img">Select Image</label>
        <input type="file" id="img" name="image" accept="image/*" class="hidden" required> 
        <input id="ppSubmit" class="button" type="submit" name="upload" value="Update Profile" >
        <div class="flex-container">
          <img id="preview" src="" class="hidden">
        </div>
      </form>

      <hr>

      <h2>Friends</h2>

      <div class="flex-container">
        <div class="friends flex-container">
          {{#each user.friends}}
        

          <div class="friend">
            {{this.name}}
            {{#if this.profile_picture}}
            <img alt="Avatar" id="timeline-profile-photo" class="w3-left w3-circle w3-margin-right" style="width:80px" src={{this.profile_picture}}> 
          {{else}}
            <img alt="Avatar" id="timeline-profile-photo" class="w3-left w3-circle w3-margin-right" style="width:80px" src="/images/cutie-pie.jpeg">
          {{/if}}
          </div>
          {{/each}}
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  img.onchange = evt => {
  const [file] = img.files
  if (file) {
    preview.src = URL.createObjectURL(file)
    preview.style.display = "block"
  }
}
</script>